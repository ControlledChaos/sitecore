(function($,window,undefined){"use strict";$.fn.app_tabs=function(options){var defaults={tabevent:"click",tabactiveclass:"active",tabattribute:"href",tabanimation:!1,tabanispeed:400,tabrotate:!1,tabdeeplinking:!1,tabpausehover:!0,tabdelay:2e3,tabactive:1,tabcontainer:!1,tabcontrols:{tabprev:".prev-tab",tabnext:".next-tab"}},options=$.extend(defaults,options);return this.each(function(){var $this=$(this),_cache_li=[],_cache_div=[];if(options.tabcontainer)var _tabcontainer=$(options.tabcontainer);else var _tabcontainer=$this;var _app_tabs=_tabcontainer.find("> div");_app_tabs.each(function(){_cache_div.push($(this).css("display"))});var elements=$this.find("> ul > li"),i=options.tabactive-1;if(!$this.data("app_tabs-init")){$this.data("app_tabs-init",!0),$this.opts=[],$.map(["tabevent","tabactiveclass","tabattribute","tabanimation","tabanispeed","tabrotate","tabdeeplinking","tabpausehover","tabdelay","tabcontainer"],function(t,a){$this.opts[t]=$this.data(t)||options[t]}),$this.opts.tabactive=$this.opts.tabdeeplinking?deep_link():$this.data("tabactive")||options.tabactive,_app_tabs.hide(),$this.opts.tabactive&&(_app_tabs.eq($this.opts.tabactive-1).show(),elements.eq($this.opts.tabactive-1).addClass(options.tabactiveclass));var fn=eval(function(t,a){if(a)var e=elements.find("a["+$this.opts.tabattribute+'="'+a+'"]').parent();else e=$(this);e.trigger("_before"),elements.removeClass(options.tabactiveclass),e.addClass(options.tabactiveclass),_app_tabs.hide(),i=elements.index(e);var s=a||e.find("a").attr($this.opts.tabattribute);return $this.opts.tabdeeplinking&&(location.hash=s),$this.opts.tabanimation?(_tabcontainer.find(s).animate({opacity:"show"},$this.opts.tabanispeed),e.trigger("_after")):(_tabcontainer.find(s).show(),e.trigger("_after")),!1}),init=eval("elements."+$this.opts.tabevent+"(fn)"),t,forward=function(){i=++i%elements.length,"hover"==$this.opts.tabevent?elements.eq(i).trigger("mouseover"):elements.eq(i).click(),$this.opts.tabrotate&&(clearTimeout(t),t=setTimeout(forward,$this.opts.delay),$this.mouseover(function(){$this.opts.tabpausehover&&clearTimeout(t)}))};function deep_link(){var t=[];elements.find("a").each(function(){t.push($(this).attr($this.opts.tabattribute))});var a=$.inArray(location.hash,t);return a>-1?a+1:$this.data("active")||options.tabactive}$this.opts.tabrotate&&(t=setTimeout(forward,$this.opts.tabdelay),$this.hover(function(){$this.opts.tabpausehover&&clearTimeout(t)},function(){t=setTimeout(forward,$this.opts.tabdelay)}),$this.opts.tabpausehover&&$this.on("mouseleave",function(){clearTimeout(t),t=setTimeout(forward,$this.opts.delay)}));var move=function(t){"forward"==t&&(i=++i%elements.length),"backward"==t&&(i=--i%elements.length),elements.eq(i).click()};$this.find(options.tabcontrols.tabnext).click(function(){move("forward")}),$this.find(options.tabcontrols.tabprev).click(function(){move("backward")}),$this.on("show",function(t,a){fn(t,a)}),$this.on("next",function(){move("forward")}),$this.on("prev",function(){move("backward")}),$this.on("destroy",function(){$(this).removeData().find("> ul li").each(function(t){$(this).removeClass(options.tabactiveclass)}),_app_tabs.each(function(t){$(this).removeAttr("style").css("display",_cache_div[t])})})}})},$(document).ready(function(){$('[data-tabbed="tabbed"]').app_tabs()})})(jQuery);