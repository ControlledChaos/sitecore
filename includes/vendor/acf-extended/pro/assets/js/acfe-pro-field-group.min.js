!function(l){var e,i;"undefined"!=typeof acf&&(new acf.Model({actions:{duplicate_field_object:"onDuplicateObject"},onDuplicateObject:function(e,a){var t=prompt("Field label",e.prop("label"));t&&t.length&&t!==e.prop("label")&&(e=acf.applyFilters("generate_field_object_name",acf.strSanitize(t),a),a.prop("label",t),a.prop("name",e))}}),e=acf.models.ConditionalLogicFieldSetting,acf.models.ConditionalLogicFieldSetting=e.extend({renderField:function(){var n=[],i=this.fieldObject.cid,e=this.$input("field"),a=acf.getFieldObjects(),t=acf.isget(acfe,"globalFieldsConditional");t&&(t=t.map(function(e){e=l('<div data-id="'+e.ID+'" data-key="'+e.key+'" data-type="'+e.type+'" data-label="'+e.label+'" data-parent="'+e.parent+'" data-menu_order="'+e.menu_order+'" data-acfe-global-field="1"></div>');return new acf.FieldObject(e)}),a=a.concat(t)),a.map(function(e){var a={id:e.getKey(),text:e.getLabel()};e.cid===i&&(a.text+=" "+acf.__("(this field)"),a.disabled=!0),acf.getConditionTypes({fieldType:e.getType()}).length||(a.disabled=!0);var t=e.getParents().length;a.text="- ".repeat(t)+a.text,e.get("acfeGlobalField")&&(a.text="Global Field: "+a.text+" ("+a.id+")"),n.push(a)}),n.length||n.push({id:"",text:acf.__("No toggle fields available")}),acf.renderSelect(e,n),this.ruleData("field",e.val())},renderOperator:function(){var e,a,t,n;this.ruleData("field")&&((e=this.$input("operator")).val(),a=[],null===e.val()&&acf.renderSelect(e,[{id:this.ruleData("operator"),text:""}]),t=acf.findFieldObject(this.ruleData("field")),t=acf.getFieldObject(t),t=acf.getConditionTypes({fieldType:t.getType()}),n=[],t.map(function(e){acfe.inArray(e.prototype.operator,n)||(a.push({id:e.prototype.operator,text:e.prototype.label}),n.push(e.prototype.operator))}),acf.renderSelect(e,a),this.ruleData("operator",e.val()))}}),new acf.Model({actions:{"prepare_field/name=acfe_note":"note","prepare_field/name=hide_on_screen":"hideOnScreen","prepare_field/name=acfe_permissions":"permissions","prepare_field/name=acfe_meta":"meta"},getTab:function(e,a){return e.$el.closest(".inside").find(".acf-tab-group a[data-key="+a+"]")},hideOnScreen:function(a){var t=this.getTab(a,"screen"),n=t.text(),e=a.val();t.html(n+(e.length?' <span class="acfe-tab-badge">'+e.length+"</span>":"")),a.on("change",function(){var e=a.val();t.html(n+(e.length?' <span class="acfe-tab-badge">'+e.length+"</span>":""))})},permissions:function(a){var t=this.getTab(a,"permissions"),n=t.text(),e=a.val();t.html(n+(e.length?' <span class="acfe-tab-badge">'+e.length+"</span>":"")),a.on("change",function(){var e=a.val();t.html(n+(e.length?' <span class="acfe-tab-badge">'+e.length+"</span>":""))})},meta:function(a){var t=this.getTab(a,"advanced"),n=t.text(),e=a.val();t.html(n+(e?' <span class="acfe-tab-badge">'+e+"</span>":"")),a.on("change",function(){var e=a.val();t.html(n+(e?' <span class="acfe-tab-badge">'+e+"</span>":""))})},note:function(a){var t=this.getTab(a,"note"),n=t.text(),e=a.val();t.html(n+(e.length?' <span class="acfe-tab-badge">1</span>':"")),a.on("change",function(){var e=a.val();t.html(n+(e.length?' <span class="acfe-tab-badge">1</span>':""))})}}),new acf.Model({actions:{"new_field/name=acfe_wysiwyg_toolbar_1":"buttonClass","new_field/name=acfe_wysiwyg_toolbar_2":"buttonClass","new_field/name=acfe_wysiwyg_toolbar_3":"buttonClass","new_field/name=acfe_wysiwyg_toolbar_4":"buttonClass"},buttonClass:function(e){e.$(".acf-button").removeClass("button-primary")}}),i=!1,new acf.Model({actions:{google_map_init:"mapInit","new_field/name=height":"mapHeight","new_field/name=zoom":"mapZoom","new_field/name=min_zoom":"mapMinZoom","new_field/name=max_zoom":"mapMaxZoom","new_field/name=acfe_google_map_marker_icon":"mapMarkerIcon","new_field/name=acfe_google_map_marker_width":"mapMarkerSetSize","new_field/name=acfe_google_map_marker_height":"mapMarkerSetSize","new_field/name=acfe_google_map_type":"mapType","new_field/name=acfe_google_map_style":"mapStyle","new_field/name=acfe_google_map_disable_ui":"mapDisableUI","new_field/name=acfe_google_map_disable_zoom_control":"mapDisableZoom","new_field/name=acfe_google_map_disable_map_type":"mapDisableMapType","new_field/name=acfe_google_map_disable_fullscreen":"mapDisableFullscreen","new_field/name=acfe_google_map_disable_streetview":"mapDisableStreetview"},getGoogleMap:function(e){return acf.getInstance(e.$el.closest("tbody.acf-field-settings").find("> .acf-field-setting-acfe_google_map_preview"))},mapInit:function(t,e,n){"acfe_google_map_preview"===n.get("name")&&(google.maps.event.addListener(t,"zoom_changed",function(){var e=acf.getInstance(n.$el.closest("tbody.acf-field-settings").find("> .acf-field-setting-acfe_google_map_zooms > .acf-input > .acf-fields > .acf-field-zoom"));i=!0,e.val(t.getZoom()),i=!1}),google.maps.event.addListener(t,"center_changed",function(){var e=n.$el.closest("tbody.acf-field-settings").find("> .acf-field-setting-center_lat > .acf-input > ul > li:eq(0) input"),a=n.$el.closest("tbody.acf-field-settings").find("> .acf-field-setting-center_lat > .acf-input > ul > li:eq(1) input");e.val(t.getCenter().lat()).change(),a.val(t.getCenter().lng()).change()}),google.maps.event.addListener(t,"maptypeid_changed",function(){acf.getInstance(n.$el.closest("tbody.acf-field-settings").find("> .acf-field-setting-acfe_google_map_type")).val(t.getMapTypeId())}))},mapHeight:function(t){var n=this.getGoogleMap(t);n&&t.on("input",function(e){var a=parseInt(t.val());isNaN(a)&&(a=400),n.$canvas().height(a)})},mapZoom:function(t){var n=this.getGoogleMap(t);n&&t.on("change",function(e){var a;i||(a=parseInt(t.val()),n.map.setZoom(a))})},mapMinZoom:function(t){var n=this.getGoogleMap(t);n&&t.on("change",function(e){var a=parseInt(t.val());n.map.setOptions({minZoom:a})})},mapMaxZoom:function(t){var n=this.getGoogleMap(t);n&&t.on("change",function(e){var a=parseInt(t.val());n.map.setOptions({maxZoom:a})})},mapMarkerIcon:function(i){var l=this.getGoogleMap(i);l&&i.on("change",function(e){var a,t,n;i.val()?(a=i.$("img").attr("src"),t=i.$el.closest("tbody.acf-field-settings").find("> .acf-field-setting-acfe_google_map_marker_height > .acf-input > ul > li:eq(0) input"),n=i.$el.closest("tbody.acf-field-settings").find("> .acf-field-setting-acfe_google_map_marker_height > .acf-input > ul > li:eq(1) input"),t=parseInt(t.val()),n=parseInt(n.val()),l.map.marker.setIcon({url:a,size:new google.maps.Size(n,t),scaledSize:new google.maps.Size(n,t)})):l.map.marker.setIcon()})},mapMarkerSetSize:function(i){var l=this.getGoogleMap(i);l&&i.on("change",function(e){var a=l.map.marker.getIcon(),t=i.$el.closest("tbody.acf-field-settings").find("> .acf-field-setting-acfe_google_map_marker_height > .acf-input > ul > li:eq(0) input"),n=i.$el.closest("tbody.acf-field-settings").find("> .acf-field-setting-acfe_google_map_marker_height > .acf-input > ul > li:eq(1) input"),t=parseInt(t.val()),n=parseInt(n.val());l.map.marker.setIcon({url:a.url,size:new google.maps.Size(n,t),scaledSize:new google.maps.Size(n,t)})})},mapType:function(t){var n=this.getGoogleMap(t);n&&t.on("change",function(e){var a=t.val();n.map.setOptions({mapTypeId:a})})},mapStyle:function(n){var i=this.getGoogleMap(n);i&&n.on("change",function(e){var a,t=n.val();try{a=l.parseJSON(t)}catch(e){a=!1}t&&0!==t.trim().length&&a?i.map.setOptions({styles:a}):i.map.setOptions({styles:""})})},mapDisableUI:function(o){var s=this.getGoogleMap(o);s&&o.on("change",function(e){var a=parseInt(o.val());s.map.setOptions({disableDefaultUI:a});var t=(t=acf.getFields({sibling:o.$el,name:"acfe_google_map_disable_zoom_control",suppressFilters:!0}))[0],n=(n=acf.getFields({sibling:o.$el,name:"acfe_google_map_disable_map_type",suppressFilters:!0}))[0],i=(i=acf.getFields({sibling:o.$el,name:"acfe_google_map_disable_fullscreen",suppressFilters:!0}))[0],l=(l=acf.getFields({sibling:o.$el,name:"acfe_google_map_disable_streetview",suppressFilters:!0}))[0];a?(t.switchOn(),t.$input().change(),n.switchOn(),n.$input().change(),i.switchOn(),i.$input().change(),l.switchOn()):(t.switchOff(),t.$input().change(),n.switchOff(),n.$input().change(),i.switchOff(),i.$input().change(),l.switchOff()),l.$input().change()})},mapDisableZoom:function(t){var n=this.getGoogleMap(t);n&&t.on("change",function(e){var a=parseInt(t.val());n.map.setOptions({zoomControl:!a}),n.map.setOptions({scrollwheel:!a})})},mapDisableMapType:function(t){var n=this.getGoogleMap(t);n&&t.on("change",function(e){var a=parseInt(t.val());n.map.setOptions({mapTypeControl:!a})})},mapDisableFullscreen:function(t){var n=this.getGoogleMap(t);n&&t.on("change",function(e){var a=parseInt(t.val());n.map.setOptions({fullscreenControl:!a})})},mapDisableStreetview:function(t){var n=this.getGoogleMap(t);n&&t.on("change",function(e){var a=parseInt(t.val());n.map.setOptions({streetViewControl:!a})})}}),new acf.Model({wait:"ready",events:{"click .add-location-rule":"onClickAddRule","click .add-location-group":"onClickAddGroup","click .remove-location-rule":"onClickRemoveRule","change .refresh-location-rule":"onChangeRemoveRule"},initialize:function(){this.$el=l(".acf-field-object-flexible-content")},onClickAddRule:function(e,a){this.addRule(a.closest("tr"))},onClickRemoveRule:function(e,a){this.removeRule(a.closest("tr"))},onChangeRemoveRule:function(e,a){this.changeRule(a.closest("tr"))},onClickAddGroup:function(e,a){this.addGroup(a.closest(".rule-groups"))},addRule:function(e){acf.duplicate(e)},removeRule:function(e){e.closest(".acf-field-object").change(),(0===e.siblings("tr").length?e.closest(".rule-group"):e).remove()},changeRule:function(a){var e=a.closest(".rule-group"),t=a.find("td.param select").attr("name").replace("[param]",""),n={action:"acfe/layout/render_location_rule"};n.prefix=t,n.rule=acf.serialize(a,t),n.rule.id=a.data("id"),n.rule.group=e.data("id"),acf.disable(a.find("td.value")),l.ajax({url:acf.get("ajaxurl"),data:acf.prepareForAjax(n),type:"post",dataType:"html",success:function(e){e&&a.replaceWith(e)}})},addGroup:function(e){e=e.find(".rule-group:last");$group2=acf.duplicate(e),$group2.find("h4").text(acf.__("or")),$group2.find("tr").not(":first").remove()}}))}(jQuery);