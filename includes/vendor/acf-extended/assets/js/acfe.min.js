!function(o){var l,n,a;"undefined"!=typeof acf&&(l={},(window.acfe=l).get=function(e){return acf.data.acfe[e]||null},l.has=function(e){return null!==this.get(e)},l.set=function(e,t){return acf.data.acfe[e]=t,this},n=[],l.Popup=acf.Model.extend({data:{title:!1,footer:!1,size:!1,destroy:!1,onOpen:function(){},onClose:function(){}},events:{"click .acfe-modal-title>.close":"onClickClose","click .acfe-modal-footer>button":"onClickClose"},setup:function(e,t){o.extend(this.data,t),this.$el=e,this.render()},initialize:function(){this.open()},render:function(){this.get("size")&&this.$el.addClass("-"+this.get("size")),this.$("> .acfe-modal-wrapper").length||this.$el.wrapInner('<div class="acfe-modal-wrapper" />');var e=this.$("> .acfe-modal-wrapper");e.find("> .acfe-modal-content").length||e.wrapInner('<div class="acfe-modal-content" />'),this.get("title")&&e.prepend('<div class="acfe-modal-title"><span class="title">'+this.get("title")+'</span><button class="close"></button></div>'),e.prepend('<div class="acfe-modal-wrapper-overlay"></div>'),this.get("footer")&&e.append('<div class="acfe-modal-footer"><button class="button button-primary">'+this.get("footer")+"</button></div>")},open:function(){this.$el.addClass("-open"),n.push(this),l.syncPopup(),acf.doAction("acfe/modal/open",this.$el,this.data),this.get("onOpen").apply(this.$el)},close:function(){this.$(".acfe-modal-wrapper-overlay").remove(),this.$(".acfe-modal-title").remove(),this.$(".acfe-modal-footer").remove(),this.$el.removeAttr("style"),this.$el.removeClass("-open"),l.syncPopup(),acf.doAction("acfe/modal/close",this.$el,this.data),this.get("onClose").apply(this.$el),this.remove(),this.get("destroy")&&this.$el.remove()},remove:function(){this.removeEvents(),this.removeActions(),this.removeFilters()},onClickClose:function(e){if(e.preventDefault(),!n.length)return!1;n.pop().close()}}),l.closePopup=function(){if(!n.length)return!1;n.pop().close()},l.syncPopup=function(){var e=o("body");n.length?(e.hasClass("acfe-modal-opened")||(e.addClass("acfe-modal-opened").append(o('<div class="acfe-modal-overlay" />')),o(".acfe-modal-overlay").on("click",function(e){e.preventDefault(),l.closePopup()})),n.map(function(e,t){return t===n.length-1?e.$el.removeClass("acfe-modal-sub").css("margin-left",""):void e.$el.addClass("acfe-modal-sub").css("margin-left",-500/(t+1))})):(o(".acfe-modal-overlay").remove(),e.removeClass("acfe-modal-opened"))},o(window).on("keydown",function(e){27===e.keyCode&&o("body").hasClass("acfe-modal-opened")&&(e.preventDefault(),l.closePopup())}),l.modal={open:function(e,t){new l.Popup(e,t)},close:function(){l.closePopup()}},a=[],l.disableFilters=function(){a=[]},l.getFilters=function(){return a},l.isFilterEnabled=function(e){return-1<a.indexOf(e)},l.enableFilter=function(e){-1===a.indexOf(e)&&a.push(e)},l.disableFilter=function(e){for(var t=a.length;t--;)a[t]===e&&a.splice(t,1)},l.parseString=function(e){return e?""+e:""},l.inArray=function(e,t){return-1<(t=t.map(function(e){return l.parseString(e)})).indexOf(e)},l.parseURL=function(e){var t={},e=(e=e||l.currentURL).replace(/^[^\?]+\??/,"");if(!e)return t;for(var o=e.split(/[;&]/),n=0;n<o.length;n++){var a,i=o[n].split("=");i&&2===i.length&&(a=decodeURI(i[0]),i=(i=decodeURI(i[1])).replace(/\+/g," "),t[a]=i)}return t},l.currentURL=function(){return self.location.href},l.currentPath=function(){return self.location.pathname},l.currentFilename=function(){return l.currentPath().split("/").pop()},l.parentObject=function(e){return Object.getPrototypeOf(Object.getPrototypeOf(e))},new acf.Model({tooltip:!1,events:{"click .acfe-field-tooltip":"showTitle"},showTitle:function(e,t){var o=t.attr("title");o&&(t.attr("title",""),this.tooltip?this.tooltip.update({text:o,target:t}):this.tooltip=acf.newTooltip({text:o,target:t}))}}))}(jQuery);