!function(n){var l,o,i;"undefined"!=typeof acf&&(acf.data.acfe={},l={},(window.acfe=l).get=function(e){return acf.data.acfe[e]||null},l.has=function(e){return null!==this.get(e)},l.set=function(e,t){return acf.data.acfe[e]=t,this},o=[],l.Popup=acf.Model.extend({data:{title:!1,footer:!1,size:!1,destroy:!1,onOpen:function(){},onClose:function(){}},events:{"click .acfe-modal-title>.close":"onClickClose","click .acfe-modal-footer>button":"onClickClose"},setup:function(e,t){n.extend(this.data,t),this.$el=e,this.render()},initialize:function(){this.open()},render:function(){this.get("size")&&this.$el.addClass("-"+this.get("size")),this.$("> .acfe-modal-wrapper").length||this.$el.wrapInner('<div class="acfe-modal-wrapper" />');var e=this.$("> .acfe-modal-wrapper");e.find("> .acfe-modal-content").length||e.wrapInner('<div class="acfe-modal-content" />'),this.get("title")&&e.prepend('<div class="acfe-modal-title"><span class="title">'+this.get("title")+'</span><button class="close"></button></div>'),e.prepend('<div class="acfe-modal-wrapper-overlay"></div>'),this.get("footer")&&e.append('<div class="acfe-modal-footer"><button class="button button-primary">'+this.get("footer")+"</button></div>")},open:function(){this.$el.addClass("-open"),o.push(this),l.syncPopup(),acf.getFields({parent:this.$el,visible:!0}).map(function(e){acf.doAction("show_field",e,"group")},this),acf.doAction("acfe/modal/open",this.$el,this.data),this.get("onOpen").apply(this.$el)},close:function(){this.$(".acfe-modal-wrapper-overlay").remove(),this.$(".acfe-modal-title").remove(),this.$(".acfe-modal-footer").remove(),this.$el.removeAttr("style"),this.$el.removeClass("-open"),l.syncPopup(),acf.doAction("acfe/modal/close",this.$el,this.data),this.get("onClose").apply(this.$el),this.remove(),this.get("destroy")&&this.$el.remove()},remove:function(){this.removeEvents(),this.removeActions(),this.removeFilters()},onClickClose:function(e){if(e.preventDefault(),!o.length)return!1;o.pop().close()}}),l.closePopup=function(){if(!o.length)return!1;o.pop().close()},l.syncPopup=function(){var e=n("body");o.length?(e.hasClass("acfe-modal-opened")||(e.addClass("acfe-modal-opened").append(n('<div class="acfe-modal-overlay" />')),n(".acfe-modal-overlay").on("click",function(e){e.preventDefault(),l.closePopup()})),o.map(function(e,t){return t===o.length-1?e.$el.removeClass("acfe-modal-sub").css("margin-left",""):void e.$el.addClass("acfe-modal-sub").css("margin-left",-500/(t+1))})):(n(".acfe-modal-overlay").remove(),e.removeClass("acfe-modal-opened"))},n(window).on("keydown",function(e){27===e.keyCode&&n("body").hasClass("acfe-modal-opened")&&(e.preventDefault(),l.closePopup())}),l.modal={open:function(e,t){new l.Popup(e,t)},close:function(){l.closePopup()}},i=[],l.disableFilters=function(){i=[]},l.getFilters=function(){return i},l.isFilterEnabled=function(e){return-1<i.indexOf(e)},l.enableFilter=function(e){-1===i.indexOf(e)&&i.push(e)},l.disableFilter=function(e){for(var t=i.length;t--;)i[t]===e&&i.splice(t,1)},l.parseString=function(e){return e?""+e:""},l.inArray=function(e,t){return-1<(t=t.map(function(e){return l.parseString(e)})).indexOf(e)},l.parseURL=function(e){var t={},e=(e=e||l.currentURL).replace(/^[^\?]+\??/,"");if(!e)return t;for(var n=e.split(/[;&]/),o=0;o<n.length;o++){var i,a=n[o].split("=");a&&2===a.length&&(i=decodeURI(a[0]),a=(a=decodeURI(a[1])).replace(/\+/g," "),t[i]=a)}return t},l.currentURL=function(){return self.location.href},l.currentPath=function(){return self.location.pathname},l.currentFilename=function(){return l.currentPath().split("/").pop()},l.parentObject=function(e){return Object.getPrototypeOf(Object.getPrototypeOf(e))},new acf.Model({tooltip:!1,events:{"click .acfe-field-tooltip":"showTitle"},showTitle:function(e,t){var n=t.attr("title");n&&(t.attr("title",""),this.tooltip?this.tooltip.update({text:n,target:t}):this.tooltip=acf.newTooltip({text:n,target:t}))}}),acf.getFileInputData=function(e,t){var n=e.val();if(!n)return!1;var o={url:n},i=!!e[0].files.length&&acf.isget(e[0].files,0);i?(o.size=i.size,o.type=i.type,-1<i.type.indexOf("image")?(n=window.URL||window.webkitURL,(e=new Image).onload=function(){o.width=this.width,o.height=this.height,t(o)},e.src=n.createObjectURL(i)):t(o)):t(o)})}(jQuery);