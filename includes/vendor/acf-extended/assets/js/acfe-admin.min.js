!function(o){"undefined"!=typeof acf&&(new acf.Model({actions:{"new_field/name=acfe_form_actions":"actionsButton","new_field/name=acfe_form_email_files":"filesButton","new_field/name=acfe_form_email_files_static":"filesButton","new_field/name=acfe_form_post_map_target":"mapFields","new_field/name=acfe_form_post_map_post_type":"mapFields","new_field/name=acfe_form_post_map_post_status":"mapFields","new_field/name=acfe_form_post_map_post_title":"mapFields","new_field/name=acfe_form_post_map_post_name":"mapFields","new_field/name=acfe_form_post_map_post_content":"mapFields","new_field/name=acfe_form_post_map_post_author":"mapFields","new_field/name=acfe_form_post_map_post_parent":"mapFields","new_field/name=acfe_form_post_map_post_terms":"mapFields","new_field/name=acfe_form_user_map_email":"mapFields","new_field/name=acfe_form_user_map_username":"mapFields","new_field/name=acfe_form_user_map_password":"mapFields","new_field/name=acfe_form_user_map_first_name":"mapFields","new_field/name=acfe_form_user_map_last_name":"mapFields","new_field/name=acfe_form_user_map_nickname":"mapFields","new_field/name=acfe_form_user_map_display_name":"mapFields","new_field/name=acfe_form_user_map_website":"mapFields","new_field/name=acfe_form_user_map_description":"mapFields","new_field/name=acfe_form_user_map_role":"mapFields","new_field/name=acfe_form_term_map_name":"mapFields","new_field/name=acfe_form_term_map_slug":"mapFields","new_field/name=acfe_form_term_map_taxonomy":"mapFields","new_field/name=acfe_form_term_map_parent":"mapFields","new_field/name=acfe_form_term_map_description":"mapFields"},filters:{select2_args:"select2Args"},actionsButton:function(e){e.on("click",'[data-name="add-layout"]',function(e){o("body").find(".acf-fc-popup").addClass("acfe-fc-popup-grey")})},filesButton:function(e){e.$("> .acf-input > .acf-repeater > .acf-actions > .acf-button").removeClass("button-primary")},mapFields:function(e){var t=e.$el.closest(".layout").find('> .acf-fields > .acf-field[data-name="'+e.get("name")+'_message"] > .acf-input'),a=e.$input().find("option:selected").text();a.length&&t.html(a),e.$input().on("change",function(){var e=o(this).find("option:selected").text();t.html(e)})},select2Args:function(e,t,a,i,n){return i.get("acfeAllowCustom")&&(e.templateSelection=function(e){if(!e.id)return e.text;e=e.text;return e=(e=(e=(e=(e=(e=(e=(e=e.replace(/{field:(.*)}/g,"<code style='font-size:12px;padding:3px;vertical-align: 1px;line-height: 12px;'>{field:$1}</code>")).replace(/{fields}/g,"<code style='font-size:12px;padding:3px;vertical-align: 1px;line-height: 12px;'>{fields}</code>")).replace(/{current:(.*)}/g,"<code style='font-size:12px;padding:3px;vertical-align: 1px;line-height: 12px;'>{current:$1}</code>")).replace(/{(form|form:.*?)}/g,"<code style='font-size:12px;padding:3px;vertical-align: 1px;line-height: 12px;'>{$1}</code>")).replace(/{action:(.*)}/g,"<code style='font-size:12px;padding:3px;vertical-align: 1px;line-height: 12px;'>{action:$1}</code>")).replace(/{get_field:(.*)}/g,"<code style='font-size:12px;padding:3px;vertical-align: 1px;line-height: 12px;'>{get_field:$1}</code>")).replace(/{query_var:(.*)}/g,"<code style='font-size:12px;padding:3px;vertical-align: 1px;line-height: 12px;'>{query_var:$1}</code>")).replace(/{request:(.*)}/g,"<code style='font-size:12px;padding:3px;vertical-align: 1px;line-height: 12px;'>{request:$1}</code>")},e.templateResult=function(e){if(!e.id)return e.text;e=e.text;return e=(e=(e=(e=(e=(e=(e=(e=e.replace(/{field:(.*?)}/g,"<code style='font-size:12px;'>{field:$1}</code>")).replace(/{fields}/g,"<code style='font-size:12px;'>{fields}</code>")).replace(/{get_field:(.*?)}/g,"<code style='font-size:12px;'>{get_field:$1}</code>")).replace(/{query_var:(.*?)}/g,"<code style='font-size:12px;'>{query_var:$1}</code>")).replace(/{request:(.*?)}/g,"<code style='font-size:12px;'>{request:$1}</code>")).replace(/{current:(.*?)}/g,"<code style='font-size:12px;'>{current:$1}</code>")).replace(/{(form|form:.*?)}/g,"<code style='font-size:12px;'>{$1}</code>")).replace(/{action:(.*?)}/g,"<code style='font-size:12px;'>{action:$1}</code>")}),e}}),new acf.Model({wait:"prepare",events:{"click .acfe_delete_meta":"onClickSingle","click #acfe_bulk_delete_meta_submit":"onSubmitBulk","click.postboxes .hide-postbox-tog":"onClickPostbox","click .acfe-wp-object-modal":"onClickOpen"},onClickOpen:function(e,t){new acfe.Popup(o(".acfe-modal[data-modal-key="+t.attr("data-modal-key")+"]"),{title:t.attr("data-modal-title"),size:"medium",footer:acf.__("Close")})},$acfWrap:function(){return o("#acfe-acf-custom-fields")},$wpWrap:function(){return o("#acfe-wp-custom-fields")},acfCount:function(){return o("#acfe-acf-custom-fields tbody tr").length},wpCount:function(){return o("#acfe-wp-custom-fields tbody tr").length},$bulkActions:function(){return o(".acfe_dev_bulk_actions")},initialize:function(){var e=this.$acfWrap(),t=this.$wpWrap(),a=this.$bulkActions();e.find(".tablenav.bottom").insertAfter(e),t.find(".tablenav.bottom").insertAfter(t),e.is(":visible")||t.is(":visible")||a.hide()},sync:function(){var e=this,t=e.acfCount(),a=e.wpCount(),i=e.$acfWrap(),n=e.$wpWrap(),e=e.$bulkActions();i.find(".acfe_dev_meta_count").text(t),n.find(".acfe_dev_meta_count").text(a),t||i.remove(),a||n.remove(),t||a||e.remove()},onClickSingle:function(e,t){e.preventDefault();var a=this,i=t.closest("tr");o.ajax({url:acf.get("ajaxurl"),type:"post",data:{action:"acfe/delete_meta",id:t.attr("data-meta-id"),key:t.attr("data-meta-key"),type:t.attr("data-type"),_wpnonce:t.attr("data-nonce")},beforeSend:function(){i.css({backgroundColor:"#faafaa"}).fadeOut(350,function(){i.remove(),a.sync()})},success:function(e){"1"!==e&&(i.css({backgroundColor:""}),i.show())}})},onSubmitBulk:function(e,t){e.preventDefault();var a,i,n=this,c=t.prevAll(".acfe_bulk_delete_meta_action").val(),e=t.prevAll(".acfe_bulk_delete_meta_type").val(),t=t.prevAll(".acfe_bulk_delete_meta_nonce").val();"delete"===c&&(a=[],i=[],o("input.acfe_bulk_delete_meta:checked").each(function(){a.push(o(this).val()),i.push(o(this).closest("tr"))}),a.length&&o.ajax({url:acf.get("ajaxurl"),type:"post",data:{action:"acfe/bulk_delete_meta",ids:a,type:e,_wpnonce:t},beforeSend:function(){i.map(function(e){o(e).css({backgroundColor:"#faafaa"}).fadeOut(350,function(){o(e).remove(),n.sync()})})}}))},onClickPostbox:function(e,t){var a=t.val(),i=this.$acfWrap(),n=this.$wpWrap(),c=this.$bulkActions();acfe.inArray(a,["acfe-wp-custom-fields","acfe-acf-custom-fields"])&&(t.prop("checked")?c.is(":visible")||c.show():("acfe-wp-custom-fields"===a&&!i.is(":visible")||"acfe-acf-custom-fields"===a&&!n.is(":visible"))&&c.hide())}}),new acf.Model({actions:{"new_field/name=acfe_author":"newField"},newField:function(e){e.on("change",function(e){e.stopPropagation()})}}),acf.addAction("show_postbox",function(e){e.$el.removeClass("acfe-postbox-left acfe-postbox-top")}),new acf.Model({actions:{new_field:"newField"},isRepeater:function(e){return"repeater"===e.get("type")||"flexible_content"===e.get("type")},getCondition:function(e){return this.isRepeater(e)?0===e.val():!e.val().length},enableSwitcher:function(e){var a,i,n=this;e.get("switched")?(a=acf.getField(e.$el.prev()),i=e):e.get("switcher")&&(a=e,i=acf.getField(e.$el.next())),n.getCondition(i)?(a.switchOff(),a.show("switcher"),i.hide("switcher")):(a.hide("switcher"),i.show("switcher")),e.get("switcher")&&(a.on("change",function(){a.$input().prop("checked")&&(a.hide("switcher"),i.show("switcher"),n.isRepeater(i)&&i.add())}),i.on("change",function(e,t){n.getCondition(i)&&(a.switchOff(),a.show("switcher"),i.hide("switcher"))}))},enableSwitch:function(e){var t=e.$el.clone();t.removeAttr("data-enable-switch"),t.attr("data-switcher",!0),t.attr("data-name",e.get("name")+"_acfe_switch"),t.attr("data-key",e.get("name")+"_acfe_switch"),t.attr("data-type","true_false"),t.find(">.acf-input").html('<div class="acf-true-false">\n<input type="hidden" value="0"><label>\n<input type="checkbox" value="1" class="acf-switch-input" autocomplete="off">\n<div class="acf-switch"><span class="acf-switch-on" style="min-width: 18px;">'+acf.__("Yes")+'</span><span class="acf-switch-off" style="min-width: 18px;">'+acf.__("No")+'</span><div class="acf-switch-slider"></div></div></label>\n</div>'),t=t.insertBefore(e.$el),acf.getField(t),e.$el.removeAttr("data-enable-switch"),e.set("enableSwitch",!1),e.$el.attr("data-switched",!0),e.set("switched",!0)},newField:function(e){e.get("enableSwitch")?this.enableSwitch(e):(e.get("switched")||e.get("switcher"))&&this.enableSwitcher(e)}}))}(jQuery);