!function(o){var e;"undefined"!=typeof acf&&(new acf.Model({actions:{append_field_object:"appendCodeEditor"},appendCodeEditor:function(e){"acfe_code_editor"===e.get("type")&&(e.$setting("default_value").find("> .acf-input > .acf-input-wrap > .CodeMirror:last").remove(),e.$setting("placeholder").find("> .acf-input > .acf-input-wrap > .CodeMirror:last").remove())}}),new acf.Model({actions:{"change_field_label/type=acfe_column":"renderTitle","change_field_type/type=acfe_column":"renderTitle","render_field_settings/type=acfe_column":"renderField"},renderTitle:function(e){var a=acf.getInstance(e),t=a.$setting("columns"),e=acf.getInstance(t).getValue(),t=a.$setting("endpoint");acf.getInstance(t).getValue()?a.set("label","(Column endpoint)"):a.set("label","(Column "+e+")")},renderField:function(e){var a=acf.getFieldObject(e),e=function(){a.set("label",!0)};a.on("change",".acfe-field-columns",e),a.on("change",".acfe-field-columns-endpoint",e)}}),new acf.Model({filters:{"select2_ajax_data/action=acfe/fields/taxonomy_terms/allow_query":"taxonomyTermsAjax"},taxonomyTermsAjax:function(e,a,t,n,i){var l=t.closest(".acf-field-settings").find("> .acf-field-setting-taxonomy > .acf-input > select > option:selected"),s=[];l.each(function(){s.push(o(this).val())}),e.taxonomies=s;t=t.closest(".acf-field-settings").find('> .acf-field-setting-allow_terms > .acf-input input[type="number"]');return e.level=t.val(),e}}),new acf.Model({wait:"prepare",events:{"click .acfe_modal_open":"onClickOpen"},onClickOpen:function(e,a){new acfe.Popup(o(".acfe-modal[data-modal-key="+a.attr("data-modal-key")+"]"),{title:"Data",size:"medium",footer:acf.__("Close")})},initialize:function(){o(".button.edit-field").each(function(){var e=o(this).closest("tbody");o(e).find(".acfe_modal_open:first").insertAfter(o(this)),o(e).find(".acfe-modal:first").appendTo(o("body")),o(e).find("tr.acf-field-setting-acfe_field_data:first").remove()})}}),new acf.Model({actions:{new_field:"onNewField"},onNewField:function(e){var a;"tab"!==e.get("type")&&(e.has("before")?(a=e.$el.siblings('[data-name="'+e.get("before")+'"]').first()).length&&a.before(e.$el):e.has("after")&&(a=e.$el.siblings('[data-name="'+e.get("after")+'"]').first()).length&&a.after(e.$el))}}),e=acf.models.TabField,acf.models.TabField=e.extend({initialize:function(){this.has("before")?($sibling=this.$el.siblings('[data-name="'+this.get("before")+'"]').first(),$sibling.length&&$sibling.before(this.$el)):this.has("after")&&($sibling=this.$el.siblings('[data-name="'+this.get("after")+'"]').first(),$sibling.length&&$sibling.after(this.$el)),e.prototype.initialize.apply(this,arguments)}}),new acf.Model({wait:"ready",actions:{append:"onAppend","acfe/field_group/rule_refresh":"refreshFields"},initialize:function(){this.$el=o("#acf-field-group-locations")},onAppend:function(e){(e.is(".rule-group")||e.parent().parent().parent().is(".rule-group"))&&this.refreshFields()},refreshFields:function(){acf.getFields({parent:this.$("td.value")}).map(function(e){acfe.inArray(e.get("type"),["date_picker","date_time_picker","time_picker"])&&(e.$inputText().removeClass("hasDatepicker").removeAttr("id"),e.initialize())})}}),new acf.Model({actions:{"new_field/name=acfe_meta":"renderClass","new_field/name=acfe_settings":"renderClass","new_field/name=acfe_validate":"renderClass"},renderClass:function(e){e.$(".acf-button").removeClass("button-primary")}}),new acf.Model({actions:{"prepare_field/name=acfe_note":"note","prepare_field/name=hide_on_screen":"hideOnScreen","prepare_field/name=acfe_permissions":"permissions","prepare_field/name=acfe_meta":"meta"},getTab:function(e,a){return e.$el.closest(".inside").find(".acf-tab-group a[data-key="+a+"]")},hideOnScreen:function(a){var t=this.getTab(a,"screen"),n=t.text(),e=a.val();t.html(n+(e.length?' <span class="acfe-tab-badge">'+e.length+"</span>":"")),a.on("change",function(){var e=a.val();t.html(n+(e.length?' <span class="acfe-tab-badge">'+e.length+"</span>":""))})},permissions:function(a){var t=this.getTab(a,"permissions"),n=t.text(),e=a.val();t.html(n+(e.length?' <span class="acfe-tab-badge">'+e.length+"</span>":"")),a.on("change",function(){var e=a.val();t.html(n+(e.length?' <span class="acfe-tab-badge">'+e.length+"</span>":""))})},meta:function(a){var t=this.getTab(a,"advanced"),n=t.text(),e=a.val();t.html(n+(e?' <span class="acfe-tab-badge">'+e+"</span>":"")),a.on("change",function(){var e=a.val();t.html(n+(e?' <span class="acfe-tab-badge">'+e+"</span>":""))})},note:function(a){var t=this.getTab(a,"note"),n=t.text(),e=a.val();t.html(n+(e.length?' <span class="acfe-tab-badge">1</span>':"")),a.on("change",function(){var e=a.val();t.html(n+(e.length?' <span class="acfe-tab-badge">1</span>':""))})}}),new acf.Model({events:{"keyup #post_name":"onInput"},onInput:function(e,a){var t=a.val();t.startsWith("group_")||(t="group_"+t,a.val(t)),o('[name="acf_field_group[key]"]').val(t),o(".misc-pub-acfe-field-group-key code").html(t)}}),new acf.Model({actions:{ready_field_object:"flexibleContent"},flexibleContent:function(e){e.get("key").startsWith("field_acfe_layout_")&&e.delete()}}))}(jQuery);